- job-template:
    name: "{{ CLUSTERNAME }}-verify-k8s"
    description: |
      Verify k8s cluster using e2e conformance tests
    node: installer
    builders:
      - shell:
          !include-raw 'builders/mcp-installer-verify.sh'
    concurrent: false
    scm:
      - openstack:
          scm-basedir: ''
          scm-branch: 'master'
          scm-repo: 'fuel-ccp-installer'
    wrappers:
      - timeout:
          timeout: 7200
          fail: false
      - ssh-agent-credentials:
          users:
            - "{{ SSH_KEY_ID }}"
    parameters:
      # END FUEL-DEVOPS PARAMS
      - string:
          name: INVENTORY_REPO
          default: "https://review.fuel-infra.org/nextgen/mcpinstaller-inventory"
      - string:
          name: INVENTORY_COMMIT
          default: "master"
      - string:
          name: KARGO_REPO
          default: "https://github.com/kubespray/kargo.git"
      - string:
          name: KARGO_COMMIT
          default: "master"
      - hidden:
          name: ADMIN_IP
          default: "local"
- project:
    name: Deploy MCP Kubernetes cluster
    jobs:
       - "{{ CLUSTERNAME }}-verify-k8s"
